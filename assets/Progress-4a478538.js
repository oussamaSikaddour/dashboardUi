const d=e=>{e.setAttribute("role","progressbar"),e.setAttribute("aria-valuenow",0),e.setAttribute("aria-live","polite")},i=(e,t)=>{t=Math.round(t),e.setAttribute("aria-valuenow",t),e.style.setProperty("--progress",`${t}%`)},m=(e,t=0,o=null)=>{let r=0;e.setAttribute("aria-busy","true"),i(e,r);const s=Date.now(),n=s+t,a=setInterval(()=>{const c=Date.now(),u=c-s;r=Math.min(Math.round(u/t*100),100),i(e,r),c>=n&&(clearInterval(a),e.setAttribute("aria-busy","false"),l())},200);o&&o(()=>{clearInterval(a),e.setAttribute("aria-busy","false"),i(e,0),l()})},l=()=>{const e=document.querySelector(".progress__container");e&&setTimeout(()=>e.classList.remove("show"),2e3)},b=()=>{const e=document.querySelector(".uploadFile"),t=document.querySelector(".progress__container"),o=document.querySelector(".progress"),r=document.querySelector(".progress__closer");let s=null;e==null||e.addEventListener("click",()=>{t.classList.add("show"),d(o);const n=parseInt(e.dataset.progress,10)||5e3;m(o,n,a=>{s=a})}),r==null||r.addEventListener("click",()=>{s&&s()})};export{b as default};
