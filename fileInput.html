<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
      integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <title>File Input | DashboardUi</title>

    <link rel="icon" type="image/icon" href="./assets/Logo-14f4ddeb.ico" />
    <script type="module" crossorigin src="./assets/main-9e5c3a03.js"></script>
    <link rel="stylesheet" href="./assets/main-dde1cee1.css">
  </head>
  <body>
    <!-- HEADER -->
    <header class="header">
      <nav class="nav" aria-labelledby="main-nav">
        <h2 id="main-nav" class="sr-only">Main navigation</h2>
        <div class="nav__addons" role="menubar">
          <a
            class="nav__logo"
            href="index.html"
            tabindex="0"
            aria-label="Description of the overall image"
          >
            <img src="./assets/Logo-c0442a44.png" alt="app Logo" />
          </a>
        </div>
      </nav>
    </header>

    <!-- PHONE NAV TOGGLE -->
    <button
      id="showPhoneNav-btn"
      class="button nav__humb"
      aria-expanded="false"
      aria-controls="options"
      aria-label="Show phone navigation"
      aria-labelledby="showPhoneNav-btn"
    >
      <span></span>
      <span></span>
    </button>

    <!-- PHONE NAV -->
    <nav class="nav--phone" aria-labelledby="main-nav-phone">
      <h2 id="main-nav-phone" class="sr-only">Main navigation for phone</h2>
      <ul class="nav__items" id="options" hidden>
        <li class="nav__item" role="none">
          <a
            class="nav__link"
            href="index.html"
            aria-current="page"
            tabindex="0"
            role="menuitem"
            >Home</a
          >
        </li>
      </ul>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="container container--fit">
      <div class="column">
        <h1>File Upload Input</h1>

        <div class="row">
          <div class="file__input__item show-uri" role="input">
            <div class="file__input__group">
              <button class="button button--info">
                Upload Files (No Images)
                <span><i class="fa-solid fa-file-import"></i></span>
              </button>
              <input type="file" name="myfile" />
            </div>

            <div class="file__input__uri">
              <p>https://www.example.com/file.pdf</p>
            </div>

            <div class="input__error">
              ⚠ Example error message to demonstrate form validation
            </div>
          </div>
        </div>
      </div>

      <section class="section" id="file-upload-section">
        <h2>Form File Upload</h2>

        <p>
          The file upload component is wrapped inside a
          <code>.file__input__item</code> container. A button is used to trigger
          the file selector, and the selected file name or URI can be displayed
          inside <code>.file__input__uri</code>. Validation messages are shown
          underneath using <code>.input__error</code>.
        </p>

        <ul>
          <li>
            <strong>.file__input__item</strong> — main wrapper for the file
            upload component
          </li>
          <li>
            <strong>.file__input__group</strong> — holds the button and file
            input element
          </li>
          <li>
            <strong>button</strong> — clickable trigger for selecting a file
          </li>
          <li>
            <strong>input[type="file"]</strong> — native file input element
          </li>
          <li>
            <strong>.file__input__uri</strong> — displays the file name or URI
            (<em>only visible when parent has <code>.show-uri</code></em
            >)
          </li>
          <li>
            <strong>.input__error</strong> — validation message shown on error
          </li>
        </ul>

        <p>
          To display the selected file name or URI, add the
          <code>.show-uri</code> class to the wrapper. Without it, the URI block
          remains hidden. This helps maintain clean layouts and only show
          details when needed. You may also connect JavaScript logic for
          validation or accepted file types.
        </p>
        <p>
          To truly master JavaScript for the elements in this section, make sure
          you
          <a href="javascript.html">read this guide carefully</a>
          and understand how to integrate scripts that directly interact with
          the elements here. For advanced event handling on these elements,
          don’t miss
          <a href="customEvent.html">this detailed CustomEvent tutorial</a>
          — it’s essential for managing custom interactions within this section.
        </p>

        <p><strong>Example markup:</strong></p>

        <pre><code class="language--html">
&lt;div class="file__input__item show-uri" role="input"&gt;

  &lt;div class="file__input__group"&gt;

    &lt;button class="button button--info"&gt;

      Upload Files (No Images)

      &lt;span&gt;&lt;i class="fa-solid fa-file-import"&gt;&lt;/i&gt;&lt;/span&gt;

    &lt;/button&gt;

    &lt;input type="file" name="myfile" /&gt;

  &lt;/div&gt;

  &lt;div class="file__input__uri"&gt;

    &lt;!-- Shown only when .show-uri is present --&gt;

    &lt;p&gt;https://www.example.com/file.pdf&lt;/p&gt;

  &lt;/div&gt;

  &lt;div class="input__error"&gt;

    ⚠ This error text will show only when there is an error

  &lt;/div&gt;

&lt;/div&gt;
</code></pre>
        <p><strong>Css:</strong></p>

        <pre><code class="language--css">

  .file__input__item {
  margin-top: 1rem;
  flex-direction: column;
  height: -moz-fit-content;
  height: fit-content;
}

.file__input__item.show-uri .button {
  border-bottom-right-radius: unset;
  border-bottom-left-radius: unset;
}

.file__input__item.show-uri > .file__input__uri {
  display: flex;
}

.file__input__group {
  position: relative;
  overflow: hidden;
  display: flex;
  align-items: center;
}

.file__input__group input[type=file] {
  font-size: 10rem;
  position: absolute;
  left: 0;
  top: 0;
  opacity: 0;
  cursor: pointer;
 width: 100%;
  height: 100%;
}

.file__input__group > .button {
  max-width: 28rem;
  max-height: 44.5px;
  width: 28rem;
  height: 44.5px;
}

.file__input__uri {
  display: none;
  align-items: center;
  padding: 0.5rem;
  height: 44.5px;
  width: 28rem;
  font-size: 1.2rem;
  background-color: #E9EAF4;
  border: var(--border);
  border-radius: var(--br);
  border-top-left-radius: unset;
  border-top-right-radius: unset;
}


.form__upload__img {
  position: relative;
  border-radius: 50%;
  width: 15rem;
  height: 15rem;
  align-self: center;
  border: var(--border);
}

.form__upload__img img {
  -o-object-fit: cover;
     object-fit: cover;
  width: 15rem;
  height: 15rem;
  border-radius: 50%;
}

.form__upload__img span {
  background-color: var(--clr-light);
  position: absolute;
  bottom: 0;
  right: 0;
}

</code></pre>
        <p><strong>JS:</strong></p>

        <pre><code class="language--js">

 import { on } from "../utils/DespatchCustomEvent";

// Open file dialog programmatically
const triggerFileDialog = (fileInput) => {
  fileInput.click();
};


// Click handler
const handleFileClick = (e, fileInput) => {
  const btn = e.target.closest('button');
  if (btn) {
    triggerFileDialog(fileInput);
  }
};


// Keyboard handler (Enter/Space)
const handleFileKeydown = (e, fileInput) => {
  if (e.key === 'Enter' || e.key === ' ' || e.key === 'Space') {
    e.preventDefault();
    triggerFileDialog(fileInput);
  }
};



const initFileInputGroup = (fileWrapper) => {
  if (!(fileWrapper instanceof HTMLElement)) return;

  fileWrapper.classList.remove('show-uri')
  const fileInput = fileWrapper.querySelector('input[type="file"]');
  const button = fileWrapper.querySelector('button');

  button.addEventListener('click', (e) => handleFileClick(e, fileInput));
  fileWrapper.addEventListener('keydown', (e) => handleFileKeydown(e, fileInput));

  // also init show-uri listener for this wrapper
  showFileUri(fileWrapper);
};


// in your UI component
const showFileUri = (fileWrapper) => {
  on("show-uri", () => {
    const fileUriElem = fileWrapper.querySelector('.file__input__uri');
    if (!fileUriElem) return;
    fileWrapper.classList.add("show-uri");
  });
};



// Exported init function
export const manageFileInputs = (fileInputGroups) => {
  fileInputGroups.forEach((wrapper) => initFileInputGroup(wrapper));
};


</code></pre>
      </section>
    </main>

    
  </body>
</html>
