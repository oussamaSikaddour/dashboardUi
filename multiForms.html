<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
      integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <title>MultiForms | DashboardUi</title>

    <link rel="icon" type="image/icon" href="./assets/Logo-14f4ddeb.ico" />
    <script type="module" crossorigin src="./assets/main-9e5c3a03.js"></script>
    <link rel="stylesheet" href="./assets/main-dde1cee1.css">
  </head>
  <body>
    <!-- HEADER -->
    <header class="header">
      <nav class="nav" aria-labelledby="main-nav">
        <h2 id="main-nav" class="sr-only">Main navigation</h2>
        <div class="nav__addons" role="menubar">
          <a
            class="nav__logo"
            href="index.html"
            tabindex="0"
            aria-label="Description of the overall image"
          >
            <img src="./assets/Logo-c0442a44.png" alt="app Logo" />
          </a>
        </div>
      </nav>
    </header>

    <!-- PHONE NAV TOGGLE -->
    <button
      id="showPhoneNav-btn"
      class="button nav__humb"
      aria-expanded="false"
      aria-controls="options"
      aria-label="Show phone navigation"
      aria-labelledby="showPhoneNav-btn"
    >
      <span></span>
      <span></span>
    </button>

    <!-- PHONE NAV -->
    <nav class="nav--phone" aria-labelledby="main-nav-phone">
      <h2 id="main-nav-phone" class="sr-only">Main navigation for phone</h2>
      <ul class="nav__items" id="options" hidden>
        <li class="nav__item" role="none">
          <a
            class="nav__link"
            href="index.html"
            aria-current="page"
            tabindex="0"
            role="menuitem"
            >Home</a
          >
        </li>
      </ul>
    </nav>

    <!-- MAIN CONTENT -->

    <main class="container container--fit">
      <div class="column">
        <h1>Multi Forms Slider</h1>

        <div class="form__container forMultiForm">
          <div class="forms">
            <form class="form" method="POST" style="--form-position: 1">
              <div><h2>form 1</h2></div>
              <div class="form__actions">
                <button
                  type="button"
                  class="button button--primary"
                  data-goto="2"
                >
                  go to form 2
                </button>
              </div>
            </form>

            <form class="form" method="POST" style="--form-position: 2">
              <div><h2>form 2</h2></div>
              <div class="form__actions">
                <button type="button" class="button" data-goto="1">
                  return to form 1
                </button>
                <button
                  type="button"
                  class="button button--primary"
                  data-goto="3"
                >
                  go to form 3
                </button>
              </div>
            </form>

            <form class="form" method="POST" style="--form-position: 3">
              <div><h2>form 3</h2></div>
              <div class="form__actions">
                <button type="button" class="button" data-goto="2">
                  return to form 2
                </button>
                <button type="submit" class="button button--primary">
                  save
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>

      <section class="section" id="multi-form-section">
        <h2>Form Navigation Between Steps</h2>

        <p>
          The <strong>Multi-Step Form</strong> component allows users to
          complete a process through a sequence of smaller, logically grouped
          forms. Each form represents one step in the workflow and can navigate
          to the next or previous step using <code>data-goto</code> buttons.
        </p>

        <p>
          This component improves usability for lengthy data entry processes by
          breaking them into clear, digestible sections. Only one form is
          visible at a time, providing a clean and focused user experience.
        </p>

        <ul>
          <li>
            <strong>.form__container.forMultiForm</strong> — main wrapper for
            multi-step forms, providing layout and contextual styling.
          </li>
          <li>
            <strong>.forms</strong> — container that holds all individual form
            steps.
          </li>
          <li>
            <strong>.form</strong> — individual form representing a single step.
            Uses inline style <code>--form-position</code> to define its index
            in the flow.
          </li>
          <li>
            <strong>.form__actions</strong> — area containing navigation buttons
            (next, previous, submit).
          </li>
          <li>
            <strong>data-goto</strong> — attribute defining the step number to
            navigate to when a button is clicked.
          </li>
          <li>
            <strong>.button</strong> — base button class for user interaction.
          </li>
          <li>
            <strong>.button--primary</strong> — highlights primary navigation
            actions such as “Next” or “Save”.
          </li>
        </ul>

        <p><strong>Accessibility Notes:</strong></p>

        <ul>
          <li>
            Each step’s form should have a descriptive heading (e.g.,
            <code>&lt;h2&gt;</code>) to help screen readers announce current
            step context.
          </li>
          <li>
            The <code>data-goto</code> logic should be handled with JavaScript
            to update visibility dynamically while maintaining focus management
            for accessibility.
          </li>
          <li>
            Only the active form step should be visible and tabbable to avoid
            confusion for keyboard users.
          </li>
        </ul>

        <p><strong>Js:</strong></p>

        <pre><code class="language--js">

import { toggleInertForChildElement } from '../utils/Inert';

const getStoredStep = (key) => {
  const stored = localStorage.getItem(key);
  return stored ? parseInt(stored) : null;
};

const storeStep = (key, step) => {
  localStorage.setItem(key, step);
};

export const clearStep = (key) => {
  localStorage.removeItem(key);
};

// ======================
// UPDATED ELEMENTS CODE
// ======================

const els = () => {

  const containers = document.querySelectorAll('.forMultiForm');

  return Array.from(containers).map(container => ({

    container: container,
    forms: container.querySelector('.forms'),
    buttons: container.querySelectorAll('[data-goto]')

  }));

};

const valid = (elements) => {

  return elements.filter(({ container, forms, buttons }) => 

    !!(container && forms && buttons.length)

  );

};

const syncInert = (forms, activeIndex) => {

  [...forms.children].forEach((form, idx) => {

    const active = idx + 1 === activeIndex;   // --form-position is 1-based

    toggleInertForChildElement(forms, form, 'slide', !active);

  });

};

// ======================
// ENHANCED goTo (uses container-specific key)
// ======================

const goTo = (container, forms, step, key) => {

  clearStep(key); // Clear before setting new step

  container.style.setProperty('--form-position', step);

  syncInert(forms, step);

  storeStep(key, step); // Store the step for persistence
  
};

// ======================
// STEP RESOLUTION (uses container-specific key)
// ======================

const resolveInitialStep = (requestedStep, key) => {

  const stored = getStoredStep(key);
  return stored || requestedStep || 1; // Priority: stored > requested > default

};

// ======================
// UPDATED HANDLER (uses container-specific key)
// ======================

const handler = (container, forms, key) => (e) => {

  const btn = e.target.closest('[data-goto]');
  if (!btn) return;
  e.preventDefault();
  goTo(container, forms, Number(btn.dataset.goto), key);

};

// ======================
// ENHANCED MAIN FUNCTION (uses array of keys)
// ======================

export const slide = ( keys = [],step) => {

  const allElements = els();
  const validElements = valid(allElements);
  
  if (!validElements.length) return;
  
  validElements.forEach(({ container, forms }, index) => {
    // Get the corresponding key from the array, or generate default if not provided
    const key = keys[index] || `slide-form-step-${index + 1}`;
    
    const initialStep = resolveInitialStep(step, key);
    goTo(container, forms, initialStep, key);
    forms.addEventListener('click', handler(container, forms, key));

  });

};
 </code></pre>

 <p>This is a small “multi-step form” engine.</p>
<ul>
  <li>Lets you place any number of containers on the same page (class <code>.forMultiForm</code>).</li>
  <li>Inside each container:
    <ul>
      <li>a wrapper <code>.forms</code> that holds several “slides” (the individual steps)</li>
      <li>any number of buttons with <code>data-goto="n"</code> to jump to slide <i>n</i></li>
    </ul>
  </li>
  <li>Makes sure only the active slide is keyboard- and screen-reader-reachable (the rest are inert).</li>
  <li>Remembers which slide the user was on for every container after reload.</li>
  <li>Keeps every multi-step block independent so their states never collide.</li>
</ul>
<p>Function-by-function:</p>
<ul>
  <li><b>localStorage helpers</b>
    <ul>
      <li><code>getStoredStep(key)</code> – read the integer stored under <i>key</i> (or return <code>null</code>).</li>
      <li><code>storeStep(key, step)</code> – save the integer <i>step</i> under <i>key</i>.</li>
      <li><code>clearStep(key)</code> – delete the entry for that <i>key</i>.</li>
    </ul>
  </li>
  <li><b>DOM helpers</b>
    <ul>
      <li><code>els()</code> – collect every <code>.forMultiForm</code> and return <code>{ container, forms, buttons }</code> for each.</li>
      <li><code>valid(elements)</code> – discard containers missing <code>.forms</code> or buttons.</li>
      <li><code>syncInert(forms, activeIndex)</code> – mark every slide except the 1-based <i>activeIndex</i> as inert.</li>
    </ul>
  </li>
  <li><b>Navigation</b>
    <ul>
      <li><code>goTo(container, forms, step, key)</code> – clear old key, set CSS var <code>--form-position</code>, sync inert, persist step.</li>
      <li><code>resolveInitialStep(requestedStep, key)</code> – pick stored step > supplied step > default 1.</li>
      <li><code>handler(container, forms, key)</code> – on <code>data-goto</code> button click, read target step and call <code>goTo</code>.</li>
    </ul>
  </li>
  <li><b>Main API</b>
    <ul>
      <li><code>slide(keys = [], step)</code> – for every valid container:
        <ul>
          <li>choose a key (from <i>keys</i> or auto-generated)</li>
          <li>resolve initial slide</li>
          <li>navigate to it immediately</li>
          <li>attach click handler for future jumps</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
<p>Usage:</p>
<ul>
  <li>HTML
        <pre><code class="language--html">

&lt;div class="form__container forMultiForm"&gt;
  &lt;div class="forms"&gt;

    &lt;form class="form" method="POST" style="--form-position: 1"&gt;
      &lt;div&gt;&lt;h2&gt;Form 1&lt;/h2&gt;&lt;/div&gt;
      &lt;div class="form__actions"&gt;
        &lt;button
          type="button"
          class="button button--primary"
          data-goto="2"
        &gt;
          Go to Form 2
        &lt;/button&gt;
      &lt;/div&gt;
    &lt;/form&gt;

    &lt;form class="form" method="POST" style="--form-position: 2"&gt;
      &lt;div&gt;&lt;h2&gt;Form 2&lt;/h2&gt;&lt;/div&gt;
      &lt;div class="form__actions"&gt;
        &lt;button type="button" class="button" data-goto="1"&gt;
          Return to Form 1
        &lt;/button&gt;
        &lt;button
          type="button"
          class="button button--primary"
          data-goto="3"
        &gt;
          Go to Form 3
        &lt;/button&gt;
      &lt;/div&gt;
    &lt;/form&gt;

    &lt;form class="form" method="POST" style="--form-position: 3"&gt;
      &lt;div&gt;&lt;h2&gt;Form 3&lt;/h2&gt;&lt;/div&gt;
      &lt;div class="form__actions"&gt;
        &lt;button type="button" class="button" data-goto="2"&gt;
          Return to Form 2
        &lt;/button&gt;
        &lt;button type="submit" class="button button--primary"&gt;
          Save
        &lt;/button&gt;
      &lt;/div&gt;
    &lt;/form&gt;

  &lt;/div&gt;
&lt;/div&gt;

</code></pre>
  </li>
  <li>JS
    <pre><code class="language--js">
import { slide } from './slide.js';

slide();                 // auto-restore last position

slide(['checkout-step']); // custom key for first container
</code>
</pre>
</li>
</ul>
<p>That’s all: the module turns static markup into persistent, accessible, multi-step wizards.</p>
        <p>
          For more information about JavaScript integration, visit the
          documentation
          <a href="javascript.html">[here]</a>.
        </p>
  


   <p><strong>CSS:</strong></p>
<pre><code class="language--css">
  .form__container.forMultiForm {

  width: calc(100% - 1rem);

  --form-position: 1;

  --forms-gap: 1rem;

}

.form__container.forMultiForm > .forms {

  display: flex;

  gap: var(--forms-gap);

  /* strip width = (number-of-forms * 100%) + (number-of-gaps * gap) */

  width: calc(var(--forms-count, 3) * 100% + (var(--forms-count, 3) - 1) * var(--forms-gap));

  transition: transform 0.35s ease;

  transform: translateX(calc((1 - var(--form-position)) * (100% + var(--forms-gap))));

}

.form__container.forMultiForm .form {

  min-width: 100%;

}

  </code></pre>
      </section>
    </main>

    
  </body>
</html>
